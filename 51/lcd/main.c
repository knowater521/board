#define uchar unsigned char 
#define lcd P1
#include <reg51.h>
#include <ZH.h>
sbit cs1 = P2^3; //换位了cs1和cs2
sbit cs2 = P2^4;
sbit rw = P2^1;
sbit rs = P2^2;
sbit e= P2^0;
sbit busy=ACC^7;//按列取，且字符是倒着的，第二排是第一排的，
uchar code huan[32]={0x24,0x12,0x07,0x10,0x17,0x14,0x14,0x17,0x10,0x3F,0x10,0x00,0x20,0xF8,0x00,0x00,
0xC0,0x40,0x40,0xC8,0x08,0xF8,0x00,0x00
};
uchar code ying[32]={0x40,0x41,0xCE,0x04,0x00,0xFC,0x04,0x02,0x02,0xFC,0x04,0x04,0x04,0xFC,0x00,0x00,
0x40,0x20,0x1F,0x20,0x40,0x47,0x42,0x41,0x40,0x5F,0x40,0x42,0x44,0x43,0x40,0x00,
};
uchar code guang[32]={
0x04,0x40,0x04,0x40,0x04,0x40,0x08,0x42,0x08,0x42,0x10,0x42,0x20,0x3E,0x40,0x00,0x01,0x00,0x21,0x10,0x19,0x18,0x0D,0x10,0x09,0x20,0x01,0x04,0x7F,0xFE,0x04,0x40,
};
uchar code lin[32]={0x00,0xF8,0x00,0x00,0xFE,0x40,0x30,0x8F,0x0A,0x08,0x18,0x68,0x08,0x88,0x08,0x00,
0x00,0x1F,0x00,0x00,0x7F,0x00,0x00,0x7F,0x21,0x21,0x3F,0x21,0x21,0x7F,0x01,0x00
};
void lcd_mwcode(uchar i) //输入控制字，
{
	rw=1;
	rs=0;
	lcd=0;
	e=1;
	do{
		ACC=lcd; //是否忙
		e=0;
	}while(busy);
	rw=0;
	lcd=i;
	e=1;
	e=0;
}
void lcd_mwdata(uchar i)//输入数据，
{
	rw=1;
	rs=0;
	lcd=0;
	e=1;
	do{
		ACC=lcd;
		e=0;
	}while(busy);
	rw=0;
	rs=1;
	lcd=i;
	e=1;
	e=0;
}
void setpos(uchar row , uchar col)
{//选择行，列，
	lcd_mwcode(0xb8+row);
	lcd_mwcode(0x40+col); 
}

void lcd_init(void)//初始化
{
	lcd_mwcode(0xc0);
	lcd_mwcode(0x3f);
}
void disp1(uchar code *hz)//显示汉字上半区，
{
	uchar i;
	for(i=0;i<16;i++)
		lcd_mwdata(*(hz+i));
}
void disp2(uchar code *hz)//显示汉字下半区 ，
{
	uchar i;
	for(i=16;i<32;i++)
		lcd_mwdata(*(hz+i));
}
void select(uchar x)
{ 	
	switch(x)
	{
		case 1:cs1=0;cs2=1;break; //左屏，
		case 2:cs1=1;cs2=0;break; //右屏，
		default :cs2=0;cs2=0;
	}
}
void main()
{ 
	lcd_init();//初始化
	select(2);//选择左屏
	setpos(0,10);
	disp1(&huan);
	disp1(&ying);

	setpos(1,10);//下一页
	disp2(&huan);
	disp2(&ying);
	select(2);//选择右屏
	setpos(2,5);
	disp1(&guang);	
	disp1(&lin);
	setpos(3,5);//下一页
	disp2(&guang);
	disp2(&lin);
}